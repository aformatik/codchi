{"_path":"/usage/init","_dir":"usage","_draft":false,"_partial":false,"_locale":"","title":"codchi init","description":"Initialize a new code machine","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"codchi-init"},"children":[{"type":"text","value":"codchi init"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Initialize a new code machine"}]},{"type":"element","tag":"h2","props":{"id":"synopsis"},"children":[{"type":"text","value":"Synopsis"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"codchi init"}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-n"}]},{"type":"text","value":"|"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--dont-run-init"}]}]},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-y"}]},{"type":"text","value":"|"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--dont-prompt"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-N"}]},{"type":"text","value":"|"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--no-build"}]}]},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-p"}]},{"type":"text","value":"|"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--use-nixpkgs"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-a"}]},{"type":"text","value":"|"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--auth"}]}]},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-b"}]},{"type":"text","value":"|"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--branch"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--tag"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-c"}]},{"type":"text","value":"|"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--commit"}]}]},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-v"}]},{"type":"text","value":"|"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--verbose"}]}]},{"type":"text","value":"... "},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-q"}]},{"type":"text","value":"|"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--quiet"}]}]},{"type":"text","value":"...\n"},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--json"}]}]},{"type":"text","value":" "},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-h"}]},{"type":"text","value":"|"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--help"}]}]},{"type":"text","value":" <"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"MACHINE_NAME"}]},{"type":"text","value":"> "},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"URL"}]}]},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"MODULE_PATHS"}]}]}]},{"type":"element","tag":"h2","props":{"id":"description"},"children":[{"type":"text","value":"Description"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A code machine usually has one module that resides in the repository of\nthe project you want to develop. To create a machine with this module,\nuse the following command. Only the url to the repository is mandatory.\nCodchi will try to guess the rest of the information and prompt you if\nneccessary."}]},{"type":"element","tag":"h2","props":{"id":"options"},"children":[{"type":"text","value":"Options"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-n"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--dont-run-init"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Do not execute the init script automatically (NixOS option\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"codchi.initScript"}]},{"type":"text","value":")"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-y"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--dont-prompt"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Dont prompt for confirmation and accept all of Codchis defaults.\nUsefull for using Codchi in scripts"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-N"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--no-build"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Dont automatically build this machine after this command completes"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-p"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--use-nixpkgs"}]},{"type":"text","value":"="},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"USE_NIXPKGS"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Whether to use Nixpkgs from the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"local"}]},{"type":"text","value":" Codchi installation or\nthe "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remote"}]},{"type":"text","value":" URL. See the \"Which nixpkgs should I use?\"\nsection of "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"codchi init"}]},{"type":"text","value":" for more details."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"By default Codchi will use "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"remote"}]},{"type":"text","value":" if "},{"type":"element","tag":"url","props":{},"children":[{"type":"text","value":" defines a\nnixpkgs input in its flake. Otherwise it will use the "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"local"}]},{"type":"text","value":"\nnixpkgs."}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"*possible values: *local, remote"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-a"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--auth"}]},{"type":"text","value":"="},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"AUTH"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Authorisation string for private repositories. Generally, the syntax\nis "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<user>:<token>"}]},{"type":"text","value":" or just "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<token>"}]},{"type":"text","value":"."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"GitHub for example has something like\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}]},{"type":"text","value":" whereas GitLab uses\n"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"oauth2:glpat-xxxxxxxxxxxxxxxxxxxx"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-b"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--branch"}]},{"type":"text","value":"="},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"BRANCH"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The git branch to use for the code machine module"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--tag"}]},{"type":"text","value":"="},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"TAG"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The git tag to use for the code machine module"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-c"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--commit"}]},{"type":"text","value":"="},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"COMMIT"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The git commit to use for the code machine module"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-v"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--verbose"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Increase logging verbosity"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-q"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--quiet"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Decrease logging verbosity"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--json"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Produce output in JSON format, suitable for consumption by another\nprogram"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"-h"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"--help"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Print help (see a summary with -h)"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"<"},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"MACHINE_NAME"}]},{"type":"text","value":">"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"Name of the code machine"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"URL"}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"HTTP(S) URL to the git repository which holds the Codchi module."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"When omitted Codchi will create a base machine without modules."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"MODULE_PATHS"}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"A list of flake paths to the Codchi modules you whish to add.\nCurrently supported: codchiModules."},{"type":"element","tag":"module","props":{},"children":[{"type":"text","value":" or\nnixosModules."},{"type":"element","tag":"module","props":{},"children":[{"type":"text","value":". If not sure which modules are available,\nleave this empty. Codchi will prompt you with a list of possible\noptions."}]}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"With "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--dont-prompt"}]},{"type":"text","value":" this argument is required."}]}]},{"type":"element","tag":"h2","props":{"id":"extra"},"children":[{"type":"text","value":"Extra"}]},{"type":"element","tag":"h3","props":{"id":"which-nixpkgs-should-i-use"},"children":[{"type":"text","value":"Which nixpkgs should I use?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Since every code machine is a NixOS system, it needs a version of\nnixpkgs (the collection containing all Nix programs). There are two\noptions:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use Codchi's nixpkgs: Every release of codchi has a pinned version\nof nixpkgs which is consistent across all code machines on a given\nhost system. Because the Nix store is shared among all machines,\nthis results in fewer package downloads, saves disk space and is\nfaster during installation or updates. The downside is that code\nmachines aren't perfectly reproducibile anymore, since the nixpkgs\nversion can change with every Codchi version. In reality this\nshouldn't be a big deal because Codchi adheres to NixOS's release\nschedule (every 6 months) and keeps nixpkgs consistent across this\ntimespan."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use the module's nixpkgs: If a module of a code machine has a\nnixpkgs input inside its "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"flake.nix"}]},{"type":"text","value":", the code machine can use (Nix\nlanguage: \"follow\") it."},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Pro: Exact reproducibility among machines with the same module\nand nixpkgs."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Con: More packages to download, more disk space and slower\nduring installation and updates."}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"examples"},"children":[{"type":"text","value":"Examples"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a machine with a Java devenv:"}]},{"type":"element","tag":"pre","props":{"code":"codchi init <MACHINE_NAME> https://github.com/aformatik/codchi nixosModules.jvm\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"codchi init <MACHINE_NAME> https://github.com/aformatik/codchi nixosModules.jvm\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a machine with Codchi's devenv (rust):"}]},{"type":"element","tag":"pre","props":{"code":"codchi init <MACHINE_NAME> https://github.com/aformatik/codchi nixosModules.codchi\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"codchi init <MACHINE_NAME> https://github.com/aformatik/codchi nixosModules.codchi\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Let Codchi search for available modules in "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<REPO_URL>"}]},{"type":"text","value":" and prompt you\nwith it:"}]},{"type":"element","tag":"pre","props":{"code":"codchi init <MACHINE_NAME> <REPO_URL>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"codchi init <MACHINE_NAME> <REPO_URL>\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create an empty base machine:"}]},{"type":"element","tag":"pre","props":{"code":"codchi init <MACHINE_NAME>\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"codchi init <MACHINE_NAME>\n"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"synopsis","depth":2,"text":"Synopsis"},{"id":"description","depth":2,"text":"Description"},{"id":"options","depth":2,"text":"Options"},{"id":"extra","depth":2,"text":"Extra","children":[{"id":"which-nixpkgs-should-i-use","depth":3,"text":"Which nixpkgs should I use?"}]},{"id":"examples","depth":2,"text":"Examples"}]}},"_type":"markdown","_id":"content:2.usage:init.md","_source":"content","_file":"2.usage/init.md","_stem":"2.usage/init","_extension":"md"}